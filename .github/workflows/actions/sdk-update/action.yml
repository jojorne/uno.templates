name: "SDK Update"
description: "Update Uno Sdk"
inputs:
  branch:
    description: "Branch to update"
    required: true

runs:
  using: "composite"
  steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        ref: ${{ inputs.branch }}
        fetch-depth: 0

    - name: Setup .NET
        uses: actions/setup-dotnet@v4
        with:
        dotnet-version: '8.0.300'

    - name: Setup GitVersion
        uses: gittools/actions/gitversion/setup@v1.1.1
        with:
        versionSpec: '5.10.3'

    - name: GitVersion
        id: gitversion
        uses: gittools/actions/gitversion/execute@v1.1.1
        with:
        useConfigFile: true
        configFilePath: build/gitversion.yml

    - name: Run Uno Sdk Updater
        run: dotnet run -c Release --project tools/Uno.Sdk.Updater